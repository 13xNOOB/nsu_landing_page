<script>
document.addEventListener('alpine:init', () => {
    Alpine.data('topVideoSlider', () => ({
        currentSlide: 0,
        play: true,
        slides: [
            {type: 'video', src: '/assets/top_slider_assets/campus_tour.mp4'},
            {type: 'image', src: '/assets/top_slider_assets/campus.jpg'}
        ],
        next() {
            this.currentSlide = (this.currentSlide + 1) % this.slides.length;
        },
        prev() {
            this.currentSlide = (this.currentSlide - 1 + this.slides.length) % this.slides.length;
        },
        playVideo() {
            this.play = true;
            if (this.slides[this.currentSlide]?.type === 'video') {
                this.$refs.videoEl?.play();
            }
        },
        pauseVideo() {
            this.play = false;
            this.$refs.videoEl?.pause();
        },
        init() {
            // Auto-slide every 10 seconds (10000ms)
            setInterval(() => {
                if (this.play) { // Only auto-slide if not paused
                this.next();
                }
            }, 10000);
            
            this.$watch('currentSlide', () => {
                if (this.play && this.slides[this.currentSlide]?.type === 'video') {
                    this.$refs.videoEl?.play();
                }
            });
        }
    }));

// News Section

  Alpine.data('newsSection', () => ({
      // Student Events Data
      categories: {
        newStudents: [],
        currentStudents: []
      },
      eventTitles: {
        newStudents: [
          'New Student Orientation',
          'Campus Tour & Registration',
          'Academic Advising Session',
          'Welcome Week Activities',
          'Library Orientation',
          'Student ID Card Distribution',
          'Dormitory Check-in',
          'Course Registration Workshop'
        ],
        currentStudents: [
          'Mid-term Examinations',
          'Study Group Session',
          'Career Fair',
          'Mental Health Support Group',
          'Academic Workshop',
          'Research Presentation',
          'Student Council Meeting',
          'Scholarship Information Session'
        ]
      },
      eventColors: [
        'text-blue-600',
        'text-purple-600', 
        'text-green-600',
        'text-red-600',
        'text-orange-600',
        'text-indigo-600',
        'text-pink-600'
      ],

      // Calendar Grid Data
      currentDate: new Date(),
      currentMonth: 5, // June (0-based)
      currentYear: 2025,
      monthNames: [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
      ],
      holidays: {
        '2025-06-14': 'Eid-ul-Fitr (estimated)',
        '2025-06-21': 'Father\'s Day (unofficial)',
        '2025-08-15': 'National Mourning Day'
      },

      // Combined Methods
      init() {
        this.generateRandomData();
      },

      // Student Events Methods
      generateRandomData() {
        ['newStudents', 'currentStudents'].forEach(category => {
          this.categories[category] = [];
          const eventCount = Math.floor(Math.random() * 6) + 3;
          for (let i = 0; i < eventCount; i++) {
            this.addRandomEvent(category, false);
          }
        });
      },

      addRandomEvent(category, single = true) {
        const titles = this.eventTitles[category];
        const title = titles[Math.floor(Math.random() * titles.length)];
        const color = this.eventColors[Math.floor(Math.random() * this.eventColors.length)];
        
        const startDate = new Date(2025, 5, 1);
        const endDate = new Date(2025, 7, 31);
        const randomTime = startDate.getTime() + Math.random() * (endDate.getTime() - startDate.getTime());
        const randomDate = new Date(randomTime);
        
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const formattedDate = `${days[randomDate.getDay()]} ${months[randomDate.getMonth()]} ${randomDate.getDate()}`;
        
        const hours = Math.floor(Math.random() * 12) + 1;
        const minutes = Math.random() < 0.5 ? '00' : '30';
        const ampm = Math.random() < 0.5 ? 'am' : 'pm';
        const endHours = hours + Math.floor(Math.random() * 3) + 1;
        const time = `${hours}:${minutes}${ampm} - ${endHours}:${minutes}${ampm}`;
        
        const event = {
          id: Date.now() + Math.random(),
          date: formattedDate,
          time: time,
          title: title,
          color: color
        };
        
        this.categories[category].push(event);
        this.categories[category].sort((a, b) => new Date(a.date) - new Date(b.date));
      },

      clearAllData() {
        Object.keys(this.categories).forEach(category => {
          this.categories[category] = [];
        });
      },

      // Calendar Grid Methods
      get calendarGrid() {
        const days = [];
        const firstDay = new Date(this.currentYear, this.currentMonth, 1);
        const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);
        const prevMonthLastDay = new Date(this.currentYear, this.currentMonth, 0);
        
        // Previous month days
        for (let i = firstDay.getDay() - 1; i >= 0; i--) {
          days.push({
            day: prevMonthLastDay.getDate() - i,
            date: new Date(this.currentYear, this.currentMonth - 1, prevMonthLastDay.getDate() - i),
            isCurrentMonth: false
          });
        }

        // Current month days
        for (let i = 1; i <= lastDay.getDate(); i++) {
          days.push({
            day: i,
            date: new Date(this.currentYear, this.currentMonth, i),
            isCurrentMonth: true
          });
        }

        // Next month days
        const nextMonthDays = 7 - lastDay.getDay() - 1;
        for (let i = 1; i <= nextMonthDays; i++) {
          days.push({
            day: i,
            date: new Date(this.currentYear, this.currentMonth + 1, i),
            isCurrentMonth: false
          });
        }

        return days;
      },

      previousMonth() {
        if (this.currentMonth === 0) {
          this.currentYear--;
          this.currentMonth = 11;
        } else {
          this.currentMonth--;
        }
      },

      nextMonth() {
        if (this.currentMonth === 11) {
          this.currentYear++;
          this.currentMonth = 0;
        } else {
          this.currentMonth++;
        }
      },

      isToday(date) {
        const today = new Date();
        return date.toDateString() === today.toDateString();
      },

      isHoliday(date) {
        const dateString = date.toISOString().split('T')[0];
        return this.holidays.hasOwnProperty(dateString);
      },

      getHolidayTitle(date) {
        const dateString = date.toISOString().split('T')[0];
        return this.holidays[dateString] || '';
      }
    }));
//   News Stories
Alpine.data('newsStoriesSection', () => ({
    showControls: false,
    stories: [],
    
    sampleStories: [
      {
        id: 1,
        title: "Enterprise State names new Performing Arts Center",
        image: "/assets/news_stories_assets/campus-building.jpg",
        date: "May 28, 2025",
        category: "Campus News"
      },
      {
        id: 2,
        title: "ESCC hires Goodson to serve as PAC Director", 
        image: "/assets/news_stories_assets/director-portrait.jpg",
        date: "May 25, 2025",
        category: "Faculty News"
      },
      {
        id: 3,
        title: "ESCC made $111.6 million economic impact for FY 23-24",
        image: "/assets/news_stories_assets/campus-building.jpg", 
        date: "May 22, 2025",
        category: "Economic Impact"
      },
      {  // Added 4th sample story
        id: 4, 
        title: "New Student Innovation Center Opens Doors",
        image: "/assets/news_stories_assets/director-portrait.jpg",
        date: "May 20, 2025",
        category: "Campus Development"
      }
    ],
    
    additionalStories: [
      {
        id: 5,
        title: "Students Excel in National Science Competition",
        image: "/assets/news_stories_assets/science-lab.jpg",
        date: "May 18, 2025", 
        category: "Student Achievement"
      },
      {
        id: 6,
        title: "New Scholarship Program Launched for Rural Students",
        image: "/assets/news_stories_assets/scholarship.jpg",
        date: "May 15, 2025",
        category: "Financial Aid"
      },
      {
        id: 7,
        title: "Alumni Donation Funds Technology Upgrades",
        image: "/assets/news_stories_assets/tech-lab.jpg",
        date: "May 12, 2025",
        category: "Alumni News"
      },
      {  // Added 4th additional story
        id: 8,
        title: "University Partners with Local Industries",
        image: "/assets/news_stories_assets/partnership.jpg",
        date: "May 10, 2025",
        category: "Community Engagement"
      }
    ],

    generateSampleStories() {
      this.stories = [...this.sampleStories];
    },

    loadMoreStories() {
      const newStories = this.additionalStories.map(story => ({
        ...story,
        id: story.id + this.stories.length
      }));
      this.stories = [...this.stories, ...newStories];
    },

    clearStories() {
      this.stories = [];
    },

    init() {
      this.generateSampleStories();
    }
  }));
  Alpine.data('footerData', () => ({
    currentYear: new Date().getFullYear(),
    socialLinks: [
      { name: 'Facebook', icon: 'fab fa-facebook-f', url: 'https://facebook.com/nsu' },
      { name: 'Twitter', icon: 'fab fa-twitter', url: 'https://twitter.com/nsu' },
      { name: 'YouTube', icon: 'fab fa-youtube', url: 'https://youtube.com/nsu' },
      { name: 'LinkedIn', icon: 'fab fa-linkedin-in', url: 'https://linkedin.com/school/nsu' },
      { name: 'Instagram', icon: 'fab fa-instagram', url: 'https://instagram.com/nsu' }
    ]
  }));
});
</script>
  